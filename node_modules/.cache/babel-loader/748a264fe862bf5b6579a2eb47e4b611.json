{"ast":null,"code":"import { get } from \"http\";\nexport default class ImageResize {\n  constructor(imageUrl, size, getCanvasUrl) {\n    this._imageUrl = imageUrl;\n    this._getCanvasUrl = getCanvasUrl;\n    this._size = size;\n    this.imageResize(imageUrl, this._size);\n  }\n\n  imageResize(imageUrl, maxWidth) {\n    let setDataGetCanvasUrl = this._getCanvasUrl;\n    let tempImg = new Image();\n    tempImg.src = imageUrl;\n\n    let createCanvas = (img, width, height) => {\n      let canvas = document.createElement('canvas');\n      canvas.width = width;\n      canvas.height = height;\n      let ctx = canvas.getContext('2d');\n      ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n      setDataGetCanvasUrl(canvas.toDataURL());\n    };\n\n    tempImg.onload = () => {\n      let tempW = tempImg.width;\n      let tempH = tempImg.height;\n      let min = tempW >= tempH ? tempH : tempW;\n      maxWidth = maxWidth || min;\n\n      if (tempW <= maxWidth && tempH <= maxWidth) {\n        createCanvas(tempW, tempH, tempImg);\n      }\n\n      let startY = 0;\n\n      if (min !== tempH) {\n        startY = Math.round(tempH / 2 - min / 2);\n      }\n\n      let startX = 0;\n\n      if (min !== tempW) {\n        startX = Math.round(tempW / 2 - min / 2);\n      }\n\n      let finalImage = new Image();\n      finalImage.src = this.getImagePortion(tempImg, min, min, startX, startY, 1);\n\n      finalImage.onload = () => {\n        createCanvas(finalImage, maxWidth, maxWidth);\n      };\n    };\n  }\n\n  getImagePortion(imgObj, newWidth, newHeight, startX, startY, ratio) {\n    let tnCanvas = document.createElement('canvas');\n    let tnContext = tnCanvas.getContext('2d');\n    tnCanvas.width = newWidth;\n    tnCanvas.height = newHeight;\n    let bufferCanvas = document.createElement('canvas');\n    let bufferContext = bufferCanvas.getContext('2d');\n    bufferCanvas.width = imgObj.width;\n    bufferCanvas.height = imgObj.height;\n    bufferContext.drawImage(imgObj, 0, 0);\n    tnContext.drawImage(bufferCanvas, startX, startY, newWidth * ratio, newHeight * ratio, 0, 0, newWidth, newHeight);\n    return tnCanvas.toDataURL();\n  }\n\n}","map":{"version":3,"sources":["/home/hari/Desktop/web-dev/React/SNStudent/src/components/ImageResize.js"],"names":["get","ImageResize","constructor","imageUrl","size","getCanvasUrl","_imageUrl","_getCanvasUrl","_size","imageResize","maxWidth","setDataGetCanvasUrl","tempImg","Image","src","createCanvas","img","width","height","canvas","document","createElement","ctx","getContext","drawImage","toDataURL","onload","tempW","tempH","min","startY","Math","round","startX","finalImage","getImagePortion","imgObj","newWidth","newHeight","ratio","tnCanvas","tnContext","bufferCanvas","bufferContext"],"mappings":"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","sourcesContent":["import {get } from \"http\";\n\nexport default class ImageResize {\n    constructor(imageUrl, size, getCanvasUrl) {\n\n        this._imageUrl = imageUrl;\n        this._getCanvasUrl = getCanvasUrl;\n        this._size = size;\n        this.imageResize(imageUrl, this._size)\n    }\n    imageResize(imageUrl, maxWidth) {\n\n        let setDataGetCanvasUrl = this._getCanvasUrl\n        let tempImg = new Image();\n        tempImg.src = imageUrl;\n\n        let createCanvas = (img, width, height) => {\n            let canvas = document.createElement('canvas');\n            canvas.width = width;\n            canvas.height = height;\n            let ctx = canvas.getContext('2d');\n            ctx.drawImage(img, 0, 0, canvas.width, canvas.height)\n            setDataGetCanvasUrl(canvas.toDataURL())\n        }\n\n        tempImg.onload = () => {\n            let tempW = tempImg.width;\n            let tempH = tempImg.height;\n            let min = tempW >= tempH ? tempH : tempW\n            maxWidth = maxWidth || min;\n\n            if (tempW <= maxWidth && tempH <= maxWidth) {\n                createCanvas(tempW, tempH, tempImg)\n            }\n\n            let startY = 0;\n            if (min !== tempH) {\n                startY = Math.round(tempH / 2 - (min / 2))\n            }\n            let startX = 0;\n            if (min !== tempW) {\n                startX = Math.round(tempW / 2 - (min / 2))\n            }\n\n            let finalImage = new Image();\n            finalImage.src = this.getImagePortion(tempImg, min, min, startX, startY, 1);\n\n            finalImage.onload = () => {\n                createCanvas(finalImage, maxWidth, maxWidth)\n            }\n\n\n\n        }\n\n    }\n\n\n\n\n\n    getImagePortion(imgObj, newWidth, newHeight, startX, startY, ratio) {\n        let tnCanvas = document.createElement('canvas');\n        let tnContext = tnCanvas.getContext('2d');\n        tnCanvas.width = newWidth;\n        tnCanvas.height = newHeight;\n\n        let bufferCanvas = document.createElement('canvas');\n        let bufferContext = bufferCanvas.getContext('2d')\n        bufferCanvas.width = imgObj.width;\n        bufferCanvas.height = imgObj.height;\n\n        bufferContext.drawImage(imgObj, 0, 0);\n\n        tnContext.drawImage(bufferCanvas, startX, startY, newWidth * ratio, newHeight * ratio, 0, 0, newWidth, newHeight)\n        return tnCanvas.toDataURL();\n\n\n    }\n\n\n}"]},"metadata":{},"sourceType":"module"}