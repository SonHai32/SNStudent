{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst ParserHelpers = require(\"./ParserHelpers\");\n\nconst ConstDependency = require(\"./dependencies/ConstDependency\");\n\nconst NullFactory = require(\"./NullFactory\");\n\nmodule.exports = class RequireJsStuffPlugin {\n  apply(compiler) {\n    compiler.hooks.compilation.tap(\"RequireJsStuffPlugin\", (compilation, {\n      normalModuleFactory\n    }) => {\n      compilation.dependencyFactories.set(ConstDependency, new NullFactory());\n      compilation.dependencyTemplates.set(ConstDependency, new ConstDependency.Template());\n\n      const handler = (parser, parserOptions) => {\n        if (parserOptions.requireJs !== undefined && !parserOptions.requireJs) return;\n        parser.hooks.call.for(\"require.config\").tap(\"RequireJsStuffPlugin\", ParserHelpers.toConstantDependency(parser, \"undefined\"));\n        parser.hooks.call.for(\"requirejs.config\").tap(\"RequireJsStuffPlugin\", ParserHelpers.toConstantDependency(parser, \"undefined\"));\n        parser.hooks.expression.for(\"require.version\").tap(\"RequireJsStuffPlugin\", ParserHelpers.toConstantDependency(parser, JSON.stringify(\"0.0.0\")));\n        parser.hooks.expression.for(\"requirejs.onError\").tap(\"RequireJsStuffPlugin\", ParserHelpers.toConstantDependencyWithWebpackRequire(parser, \"__webpack_require__.oe\"));\n      };\n\n      normalModuleFactory.hooks.parser.for(\"javascript/auto\").tap(\"RequireJsStuffPlugin\", handler);\n      normalModuleFactory.hooks.parser.for(\"javascript/dynamic\").tap(\"RequireJsStuffPlugin\", handler);\n    });\n  }\n\n};","map":null,"metadata":{},"sourceType":"script"}