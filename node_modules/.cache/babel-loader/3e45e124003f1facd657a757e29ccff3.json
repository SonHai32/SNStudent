{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst Dependency = require(\"../Dependency\");\n\nconst CriticalDependencyWarning = require(\"./CriticalDependencyWarning\");\n\nconst regExpToString = r => r ? r + \"\" : \"\";\n\nclass ContextDependency extends Dependency {\n  // options: { request, recursive, regExp, include, exclude, mode, chunkName, groupOptions }\n  constructor(options) {\n    super();\n    this.options = options;\n    this.userRequest = this.options.request;\n    /** @type {false | string} */\n\n    this.critical = false;\n    this.hadGlobalOrStickyRegExp = false;\n\n    if (this.options.regExp.global || this.options.regExp.sticky) {\n      this.options.regExp = null;\n      this.hadGlobalOrStickyRegExp = true;\n    }\n  }\n\n  getResourceIdentifier() {\n    return \"context\".concat(this.options.request, \" \").concat(this.options.recursive, \" \") + \"\".concat(regExpToString(this.options.regExp), \" \").concat(regExpToString(this.options.include), \" \").concat(regExpToString(this.options.exclude), \" \") + \"\".concat(this.options.mode, \" \").concat(this.options.chunkName, \" \") + \"\".concat(JSON.stringify(this.options.groupOptions));\n  }\n\n  getWarnings() {\n    let warnings = super.getWarnings() || [];\n\n    if (this.critical) {\n      warnings.push(new CriticalDependencyWarning(this.critical));\n    }\n\n    if (this.hadGlobalOrStickyRegExp) {\n      warnings.push(new CriticalDependencyWarning(\"Contexts can't use RegExps with the 'g' or 'y' flags.\"));\n    }\n\n    return warnings;\n  }\n\n} // TODO remove in webpack 5\n\n\nObject.defineProperty(ContextDependency.prototype, \"async\", {\n  configurable: false,\n\n  get() {\n    throw new Error(\"ContextDependency.async was removed. Use ContextDependency.options.mode instead.\");\n  },\n\n  set() {\n    throw new Error(\"ContextDependency.async was removed. Pass options.mode to constructor instead\");\n  }\n\n});\nmodule.exports = ContextDependency;","map":null,"metadata":{},"sourceType":"script"}