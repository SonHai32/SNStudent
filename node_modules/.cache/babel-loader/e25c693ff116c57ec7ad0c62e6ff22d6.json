{"ast":null,"code":"var _jsxFileName = \"/home/hari/Desktop/web-dev/React/cstudy/src/components/NewsFeeds/NewsFeeds.js\";\nimport React from 'react';\nimport { Segment, Header, Icon, Feed, Image, Divider, Form, Input, Button, List, Responsive, Dropdown, Container, Loader, Dimmer, Label } from 'semantic-ui-react';\nimport uuid from 'uuidv4';\nimport firebase from '../../firebase';\nimport FileModal from './FileModal';\nimport ImageModal from './ImageModal';\nimport * as moment from 'moment';\nimport hash from 'js-hash-code';\nimport CreatePostModal from './CreatePostModal';\n\nclass NewsFeeds extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      like: false,\n      user: this.props.currentUser,\n      post: '',\n      fileModal: false,\n      imageModalStatus: false,\n      imageModalURL: '',\n      postModal: false,\n      uploadTask: null,\n      uploadStatus: '',\n      percentUploaded: 0,\n      imagePost: [],\n      postCreate: [],\n      postFromDatabase: [],\n      storeRef: firebase.storage().ref(),\n      databaseRef: firebase.database().ref('posts'),\n      imageLoading: false,\n      postLoading: false,\n      postDrowdownOptions: [{\n        key: 'savePost',\n        text: React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 38\n          },\n          __self: this\n        }, React.createElement(Icon, {\n          circular: true,\n          size: \"small\",\n          name: \"tag\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 38\n          },\n          __self: this\n        }), \"L\\u01B0u b\\xE0i vi\\u1EBFt\")\n      }, {\n        key: 'postReport',\n        text: React.createElement(\"span\", {\n          onClick: this.handleMessage,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 44\n          },\n          __self: this\n        }, React.createElement(Icon, {\n          circular: true,\n          size: \"small\",\n          name: \"warning\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 44\n          },\n          __self: this\n        }), \"B\\xE1o c\\xE1o b\\xE0i vi\\u1EBFt\")\n      }]\n    };\n\n    this.addPostListener = () => {\n      const ref = firebase.database().ref('posts');\n      const postLoaded = [];\n      ref.on('child_added', snap => {\n        ref.child(snap.key).on('child_added', snap => postLoaded.push(snap.val()));\n        this.setState({\n          postFromDatabase: postLoaded.sort((a, b) => {\n            return b.timestamp - a.timestamp;\n          })\n        });\n      });\n    };\n\n    this.handlePostChange = (e, {\n      value\n    }) => {\n      this.setState({\n        post: value\n      });\n    };\n\n    this.openModal = () => {\n      this.setState({\n        fileModal: true\n      });\n    };\n\n    this.closeModal = () => {\n      this.setState({\n        fileModal: false\n      });\n    };\n\n    this.openImageModal = event => {\n      this.setState({\n        imageModalStatus: true,\n        imageModalURL: event.target.name\n      });\n    };\n\n    this.closeImageModal = () => {\n      this.setState({\n        imageModalStatus: false,\n        imageModalURL: ''\n      });\n    };\n\n    this.openPostModal = () => {\n      this.setState({\n        postModal: true\n      });\n    };\n\n    this.closePostModal = () => {\n      this.setState({\n        postModal: true\n      });\n    };\n\n    this.uploadFile = (file, metadata) => {\n      const filePath = this.state.user.uid + '/media/image/' + uuid() + '.jpg';\n      this.setState({\n        imageLoading: true,\n        uploadTask: this.state.storeRef.child(filePath).put(file, metadata)\n      }, () => {\n        this.state.uploadTask.on('state_changed', snap => {\n          const percentUploaded = Math.round(snap.bytesTransferred / snap.totalBytes * 100);\n          console.log(percentUploaded);\n          this.setState({\n            percentUploaded\n          });\n\n          if (percentUploaded === 100) {\n            this.setState({\n              percentUploaded: 0\n            });\n            setTimeout(() => {\n              this.state.uploadTask.snapshot.ref.getDownloadURL().then(downloadURL => {\n                const image = {\n                  downloadURL: downloadURL,\n                  imagePath: this.state.uploadTask.location_.path\n                };\n                this.setState({\n                  imagePost: this.state.imagePost.concat(image),\n                  imageLoading: false\n                });\n              }).catch(err => console.log(err));\n            }, 1000);\n          }\n        });\n      }, err => {\n        console.log(err);\n      });\n    };\n\n    this.savePost = event => {\n      event.preventDefault();\n      const postChild = this.state.user.uid + uuid() + '/post';\n      const postCreate = {\n        postChild: postChild,\n        createByUid: this.state.user.uid,\n        createByName: this.state.user.displayName,\n        avatar: this.state.user.photoURL,\n        timestamp: Date.now(),\n        postImages: Array().concat(this.state.imagePost),\n        postText: this.state.post,\n        liked: [{\n          username: 'null',\n          userUID: 'null'\n        }]\n      };\n      this.state.databaseRef.child(postChild).set(postCreate).then(() => this.setState({\n        post: '',\n        imagePost: []\n      }));\n    };\n\n    this.handleLikeClicked = (event, {\n      name\n    }) => {\n      event.preventDefault();\n      const post = this.state.postFromDatabase.filter((val, key, arr) => {\n        return val.postChild === name;\n      });\n      console.log(post[0].avatar);\n      let postLiked = post[0].liked;\n      const currentUserLiked = postLiked.some(val => {\n        return val.userUID === this.state.user.uid;\n      });\n      const imageNotExist = post[0].postImages === undefined;\n\n      if (currentUserLiked) {\n        postLiked = postLiked.filter((val, index, arr) => {\n          return val.userUID !== this.state.user.uid;\n        });\n      } else {\n        postLiked.push({\n          username: this.state.user.displayName,\n          userUID: this.state.user.uid\n        });\n      }\n\n      let postUpdate;\n\n      if (imageNotExist) {\n        post.forEach(val => {\n          postUpdate = {\n            postChild: val.postChild,\n            createByUid: val.createByUid,\n            createByName: val.createByName,\n            avatar: val.avatar,\n            timestamp: val.timestamp,\n            postText: val.postText,\n            liked: postLiked\n          };\n        });\n      } else {\n        post.forEach(val => {\n          postUpdate = {\n            postChild: val.postChild,\n            createByUid: val.createByUid,\n            createByName: val.createByName,\n            avatar: val.avatar,\n            timestamp: val.timestamp,\n            postImages: val.postImages,\n            postText: val.postText,\n            liked: postLiked\n          };\n        });\n      }\n\n      this.state.databaseRef.child(name).set(postUpdate).then(() => this.addPostListener()).catch(err => console.log(err));\n    };\n\n    this.displayImagePost = ({\n      imagePost\n    }) => // this.state.uploadStatus.includes('uploading')  ? \n    // <Segment size='large' loading={this.state.percentUploaded < 100} >\n    //   <List horizontal>\n    //       {imagePost.map((val,key) => (\n    //         <List.Item key={key+uuid} style={{marginRight: '15px'}}> \n    //             <Image  rounded size='small' key={val.downloadURL} src={val.downloadURL} label={{as: 'a' ,name: key, corner:'right', icon:'remove',size: 'mini',color:'red',onClick: this.removeImagePost}} /> \n    //         </List.Item> ) )}\n    //     <List.Item>\n    //       <Icon style={{cursor: 'pointer', boder: 'solid 2px '}} color='black' inverted name='add' size='big' onClick={this.openModal} />\n    //     </List.Item>\n    //   </List>\n    // </Segment> : ''\n    React.createElement(Dimmer.Dimmable, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254\n      },\n      __self: this\n    }, React.createElement(Dimmer, {\n      inverted: true,\n      active: this.state.percentUploaded > 0 && this.state.percentUploaded < 100,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255\n      },\n      __self: this\n    }, React.createElement(Loader, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256\n      },\n      __self: this\n    }, \"Loading\")), React.createElement(List, {\n      horizontal: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260\n      },\n      __self: this\n    }, imagePost.map((val, key) => React.createElement(List.Item, {\n      key: key + uuid,\n      style: {\n        marginRight: '15px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 263\n      },\n      __self: this\n    }, React.createElement(Image, {\n      wrapped: true,\n      rounded: true,\n      size: \"small\",\n      key: val.downloadURL,\n      src: val.downloadURL,\n      label: {\n        as: 'a',\n        name: key,\n        corner: 'right',\n        icon: 'remove',\n        size: 'tiny',\n        color: 'red',\n        onClick: this.removeImagePost\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265\n      },\n      __self: this\n    }))), imagePost.length > 0 ? React.createElement(List.Item, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      link: true,\n      color: \"black\",\n      inverted: true,\n      name: \"add\",\n      size: \"big\",\n      onClick: this.openModal,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271\n      },\n      __self: this\n    })) : ''));\n\n    this.deleteImageFromStorge = imagePath => {\n      if (imagePath) {\n        this.state.storeRef.child(imagePath).delete().then(() => console.log(\"deleted\")).catch(err => console.log(err));\n      }\n    };\n\n    this.removeImagePost = event => {\n      event.preventDefault();\n      let removeIndex = event.target.name;\n      this.deleteImageFromStorge(this.state.imagePost[removeIndex].imagePath);\n      const newImagePost = this.state.imagePost.filter((value, index, arr) => {\n        return index != removeIndex;\n      });\n      this.setState({\n        imagePost: newImagePost\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.addPostListener();\n  }\n\n  render() {\n    const _this$state = this.state,\n          user = _this$state.user,\n          post = _this$state.post,\n          postFromDatabase = _this$state.postFromDatabase;\n    return React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 313\n      },\n      __self: this\n    }, React.createElement(CreatePostModal, {\n      user: user,\n      modal: this.state.postModal,\n      closeModal: this.closeModal,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 314\n      },\n      __self: this\n    }), React.createElement(FileModal, {\n      fileModal: this.state.fileModal,\n      uploadFile: this.uploadFile,\n      closeModal: this.closeModal,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315\n      },\n      __self: this\n    }), React.createElement(Segment, {\n      stacked: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 320\n      },\n      __self: this\n    }, React.createElement(Header, {\n      as: \"h3\",\n      block: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 322\n      },\n      __self: this\n    }, React.createElement(Header.Content, {\n      style: {\n        opacity: 0.6\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 324\n      },\n      __self: this\n    }, \"T\\u1EA1o B\\xE0i Vi\\u1EBFt \", React.createElement(Icon, {\n      name: \"edit outline\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 324\n      },\n      __self: this\n    }))), this.displayImagePost(this.state), React.createElement(Form, {\n      style: {\n        marginTop: '5px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 333\n      },\n      __self: this\n    }, React.createElement(Form.Group, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 334\n      },\n      __self: this\n    }, React.createElement(Image, {\n      size: \"tiny\",\n      avatar: true,\n      src: user.photoURL,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 335\n      },\n      __self: this\n    }), React.createElement(Form.Field, {\n      style: {\n        width: '100%'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 338\n      },\n      __self: this\n    }, React.createElement(Input, {\n      transparent: true,\n      placeholder: \"B\\u1EA1n \\u0111ang ngh\\u0129 g\\xEC ?\",\n      style: {\n        height: '70px',\n        fontSize: 16\n      },\n      value: post,\n      onClick: this.openPostModal,\n      onChange: this.openPostModal,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 339\n      },\n      __self: this\n    })))), React.createElement(Button.Group, {\n      compact: true,\n      fluid: true,\n      widths: 4,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 349\n      },\n      __self: this\n    }, React.createElement(Button, {\n      inverted: true,\n      style: {\n        background: '#6FBE42'\n      },\n      onClick: this.openModal,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 351\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      name: \"photo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 352\n      },\n      __self: this\n    }), \" \\u1EA2nh/Video\"), React.createElement(Button, {\n      inverted: true,\n      style: {\n        background: '#6FBE42'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 354\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      name: \"user plus\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 355\n      },\n      __self: this\n    }), \" Tag Friends\"), React.createElement(Button, {\n      inverted: true,\n      style: {\n        background: '#6FBE42'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 359\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      name: \"smile outline\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 360\n      },\n      __self: this\n    }), \" C\\u1EA3m X\\xFAc\"), React.createElement(Button, {\n      inverted: true,\n      style: {\n        background: '#6FBE42'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 363\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      name: \"list\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 364\n      },\n      __self: this\n    }), \" Kh\\xE1c\")), this.state.post.length > 0 || this.state.imagePost.length > 0 ? React.createElement(Button, {\n      onClick: this.savePost,\n      fluid: true,\n      style: {\n        marginTop: '20px',\n        background: '#ecf7e7'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 369\n      },\n      __self: this\n    }, \"Post\") : ''), postFromDatabase.length > 0 ? postFromDatabase.map((val, key) => React.createElement(Segment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 380\n      },\n      __self: this\n    }, React.createElement(Feed, {\n      size: \"large\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 382\n      },\n      __self: this\n    }, React.createElement(Feed.Event, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 383\n      },\n      __self: this\n    }, React.createElement(Feed.Label, {\n      image: val.avatar,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 384\n      },\n      __self: this\n    }), React.createElement(Feed.Content, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 385\n      },\n      __self: this\n    }, React.createElement(Feed.Summary, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 386\n      },\n      __self: this\n    }, React.createElement(Dropdown, {\n      inline: true,\n      closeOnChange: true,\n      options: this.state.postDrowdownOptions,\n      pointing: \"top right\",\n      icon: null,\n      style: {\n        float: 'right',\n        zIndex: 1000\n      },\n      trigger: React.createElement(Icon, {\n        name: \"angle down\",\n        style: {\n          opacity: 0.5\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 394\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 387\n      },\n      __self: this\n    }), React.createElement(Feed.User, {\n      content: val.createByName,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 396\n      },\n      __self: this\n    }), React.createElement(Feed.Date, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 397\n      },\n      __self: this\n    }, moment(val.timestamp).locale('vi').fromNow())), React.createElement(Feed.Summary, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 406\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      style: {\n        opacity: 0.5,\n        fontSize: 14\n      },\n      className: \"fas fa-globe-asia\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 407\n      },\n      __self: this\n    }))))), React.createElement(Feed, {\n      size: \"large\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 420\n      },\n      __self: this\n    }, React.createElement(Feed.Event, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 422\n      },\n      __self: this\n    }, React.createElement(Feed.Content, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 423\n      },\n      __self: this\n    }, React.createElement(Container, {\n      fluid: true,\n      text: true,\n      textAlign: \"justified\",\n      content: val.postText,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 424\n      },\n      __self: this\n    }), val.postImages ? val.postImages.map((value, key) => React.createElement(List, {\n      key: val.createByUid + val.timestamp + uuid() + hash(value.downloadURL),\n      horizontal: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 429\n      },\n      __self: this\n    }, React.createElement(List.Item, {\n      key: 'list' + val.createByUid + val.timestamp + uuid() + hash(value.downloadURL),\n      as: \"a\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 430\n      },\n      __self: this\n    }, React.createElement(Image, {\n      centered: true,\n      fluid: true,\n      key: 'image' + val.createByUid + val.timestamp + uuid() + hash(value.downloadURL),\n      src: value.downloadURL,\n      name: value.downloadURL,\n      onClick: this.openImageModal,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 433\n      },\n      __self: this\n    }), React.createElement(ImageModal, {\n      imageModal: this.state.imageModalStatus,\n      closeModal: this.closeImageModal,\n      imageURL: this.state.imageModalURL,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 436\n      },\n      __self: this\n    })))) : '')), React.createElement(Container, {\n      style: {\n        marginTop: '15px'\n      },\n      fluid: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 454\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      name: val.liked.length - 1 !== 0 ? 'thumbs up' : '',\n      color: \"blue\",\n      size: \"small\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 455\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      style: {\n        opacity: 0.6\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 458\n      },\n      __self: this\n    }, val.liked.length - 1 === 0 ? '' : val.liked.length - 1 + ' Thích'), React.createElement(\"span\", {\n      style: {\n        float: 'right',\n        opacity: 0.6\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 459\n      },\n      __self: this\n    }, \"20 comnents\")), React.createElement(Divider, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 462\n      },\n      __self: this\n    }), React.createElement(Button.Group, {\n      fluid: true,\n      size: \"small\",\n      compact: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 463\n      },\n      __self: this\n    }, React.createElement(Button, {\n      name: val.postChild,\n      onClick: this.handleLikeClicked,\n      basic: true,\n      compact: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 464\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      name: \"thumbs up\",\n      color: val.liked.some(val => {\n        return val.userUID === user.uid;\n      }) ? 'blue' : '',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 466\n      },\n      __self: this\n    }), \" Like\"), React.createElement(Button, {\n      basic: true,\n      compact: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 468\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      name: \"comment outline\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 469\n      },\n      __self: this\n    }), \" Comment\"), React.createElement(Button, {\n      basic: true,\n      compact: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 471\n      },\n      __self: this\n    }, React.createElement(Icon, {\n      name: \"share\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 472\n      },\n      __self: this\n    }), \" Share\")), React.createElement(Divider, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 475\n      },\n      __self: this\n    })))) : '');\n  }\n\n}\n\nexport default NewsFeeds;","map":{"version":3,"sources":["/home/hari/Desktop/web-dev/React/cstudy/src/components/NewsFeeds/NewsFeeds.js"],"names":["React","Segment","Header","Icon","Feed","Image","Divider","Form","Input","Button","List","Responsive","Dropdown","Container","Loader","Dimmer","Label","uuid","firebase","FileModal","ImageModal","moment","hash","CreatePostModal","NewsFeeds","Component","state","like","user","props","currentUser","post","fileModal","imageModalStatus","imageModalURL","postModal","uploadTask","uploadStatus","percentUploaded","imagePost","postCreate","postFromDatabase","storeRef","storage","ref","databaseRef","database","imageLoading","postLoading","postDrowdownOptions","key","text","handleMessage","addPostListener","postLoaded","on","snap","child","push","val","setState","sort","a","b","timestamp","handlePostChange","e","value","openModal","closeModal","openImageModal","event","target","name","closeImageModal","openPostModal","closePostModal","uploadFile","file","metadata","filePath","uid","put","Math","round","bytesTransferred","totalBytes","console","log","setTimeout","snapshot","getDownloadURL","then","downloadURL","image","imagePath","location_","path","concat","catch","err","savePost","preventDefault","postChild","createByUid","createByName","displayName","avatar","photoURL","Date","now","postImages","Array","postText","liked","username","userUID","set","handleLikeClicked","filter","arr","postLiked","currentUserLiked","some","imageNotExist","undefined","index","postUpdate","forEach","displayImagePost","map","marginRight","as","corner","icon","size","color","onClick","removeImagePost","length","deleteImageFromStorge","delete","removeIndex","newImagePost","componentDidMount","render","opacity","marginTop","width","height","fontSize","background","float","zIndex","locale","fromNow"],"mappings":"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","sourcesContent":["import React from 'react'\nimport {Segment,Header,Icon, Feed,Image, Divider, Form, Input, Button, List, Responsive, Dropdown, Container, Loader, Dimmer, Label} from 'semantic-ui-react'\nimport uuid from 'uuidv4'\nimport firebase from '../../firebase'\nimport FileModal from './FileModal'\nimport ImageModal from './ImageModal'\nimport * as moment from 'moment'\nimport hash from 'js-hash-code'\nimport CreatePostModal from './CreatePostModal'\n\n\n\n\n\nclass NewsFeeds extends React.Component{\n\n    state ={\n      like: false,\n      user: this.props.currentUser,\n      post: '',\n      fileModal: false,\n      imageModalStatus: false,\n      imageModalURL: '',\n      postModal: false,\n      uploadTask: null,\n      uploadStatus : '',\n      percentUploaded : 0,\n      imagePost: [],\n      postCreate: [],\n      postFromDatabase: [],\n      storeRef: firebase.storage().ref(),\n      databaseRef: firebase.database().ref('posts'),\n      imageLoading: false,\n      postLoading: false,\n      postDrowdownOptions: [\n        {\n          key: 'savePost',\n          text: <span><Icon circular size='small' name='tag' />Lưu bài viết</span>,\n\n          \n        },\n        {\n          key: 'postReport',\n          text :  <span onClick={this.handleMessage} ><Icon circular size='small' name='warning' />Báo cáo bài viết</span>,\n          \n        \n      },\n\n      ]\n   \n    }\n\n    componentDidMount(){\n      this.addPostListener()\n    }\n\n    addPostListener = () =>{\n\n      const ref = firebase.database().ref('posts')\n      const postLoaded = []\n      ref.on('child_added',snap =>{\n        ref.child(snap.key).on('child_added',snap => postLoaded.push(snap.val()));\n        this.setState({postFromDatabase: postLoaded.sort((a,b) =>{return b.timestamp-a.timestamp})})\n   \n        \n      })\n    \n      \n  \n    }\n\n\n\n    \n    handlePostChange = (e, { value}) =>{\n    \n      this.setState({post: value})\n    }\n    \n    openModal = () =>{\n      this.setState({fileModal: true})\n    }\n\n    closeModal = () =>{\n\n      this.setState({fileModal: false})\n    }\n\n    openImageModal = event =>{\n     \n      this.setState({imageModalStatus: true, imageModalURL: event.target.name})\n    }\n\n    closeImageModal = () =>{\n      this.setState({imageModalStatus: false, imageModalURL:''})\n\n    }\n\n    openPostModal = () =>{\n      this.setState({postModal: true})\n    }\n\n    closePostModal = () =>{\n      this.setState({postModal: true})\n    }\n\n    uploadFile = (file, metadata) =>{\n      const filePath = this.state.user.uid+'/media/image/'+uuid()+'.jpg'\n     \n      this.setState({\n  \n        imageLoading: true,\n        uploadTask: this.state.storeRef.child(filePath).put(file,metadata)\n      \n        },\n          () => {\n            this.state.uploadTask.on('state_changed', snap =>{\n              const percentUploaded = Math.round((snap.bytesTransferred / snap.totalBytes)*100);\n              console.log(percentUploaded)\n              this.setState({percentUploaded});\n            \n            if(percentUploaded === 100){\n              this.setState({percentUploaded: 0})\n              setTimeout(()=>{\n                this.state.uploadTask.snapshot.ref\n              .getDownloadURL()\n              .then(downloadURL => {\n                const image = {downloadURL: downloadURL, imagePath: this.state.uploadTask.location_.path}\n                this.setState({imagePost: this.state.imagePost.concat(image),imageLoading: false})\n              \n                 })\n                .catch(err=>console.log(err))\n              },1000)  \n            \n            }\n            \n            })\n          },err=>{console.log(err)}\n        )\n      }\n\n      savePost = event =>{\n        event.preventDefault();\n        const postChild = this.state.user.uid+uuid()+'/post';\n        const postCreate ={\n          postChild: postChild,\n          createByUid: this.state.user.uid,\n          createByName: this.state.user.displayName,\n          avatar: this.state.user.photoURL ,\n          timestamp: Date.now(),\n          postImages: Array().concat(this.state.imagePost),\n          postText: this.state.post,\n          liked: [{username: 'null', userUID: 'null'}]\n        }\n        \n        this.state.databaseRef.child(postChild).set(postCreate).then(()=>this.setState({post: '', imagePost: []}))\n        \n      }\n\n\n      \n\n      handleLikeClicked = (event, {name}) =>{\n     \n        event.preventDefault();\n        const post = this.state.postFromDatabase.filter((val,key,arr)=>{\n          return val.postChild === name\n        })\n\n        console.log(post[0].avatar);\n\n        \n        \n        let postLiked= post[0].liked;\n\n        const  currentUserLiked = postLiked.some(val=>{\n          \n          return val.userUID === this.state.user.uid;\n         \n        })\n\n\n        const imageNotExist = post[0].postImages === undefined;\n      \n        if(currentUserLiked){\n            postLiked = postLiked.filter((val,index,arr)=>{\n            return val.userUID !== this.state.user.uid\n          })\n        }else{\n          postLiked.push({username: this.state.user.displayName, userUID: this.state.user.uid})\n        }\n  \n        let postUpdate ;\n        if(imageNotExist){\n          post.forEach(val=>{\n            postUpdate ={\n              postChild: val.postChild,\n              createByUid: val.createByUid,\n              createByName: val.createByName,\n              avatar: val.avatar,\n              timestamp: val.timestamp,\n              postText: val.postText,\n              liked: postLiked\n            }\n            \n          \n          })\n         \n        }else{\n          post.forEach(val=>{\n            postUpdate ={\n              postChild: val.postChild,\n              createByUid: val.createByUid,\n              createByName: val.createByName,\n              avatar: val.avatar,\n              timestamp: val.timestamp,\n              postImages: val.postImages ,\n              postText: val.postText,\n              liked: postLiked\n            }\n            \n          \n          })\n        }\n       \n  \n         this.state.databaseRef.child(name).set(postUpdate).then(()=>this.addPostListener()).catch(err=>console.log(err))\n  \n      \n      }\n\n      \n\n      \n      displayImagePost = ({imagePost}) =>(\n        // this.state.uploadStatus.includes('uploading')  ? \n        // <Segment size='large' loading={this.state.percentUploaded < 100} >\n        //   <List horizontal>\n          \n        //       {imagePost.map((val,key) => (\n        //         <List.Item key={key+uuid} style={{marginRight: '15px'}}> \n\n        //             <Image  rounded size='small' key={val.downloadURL} src={val.downloadURL} label={{as: 'a' ,name: key, corner:'right', icon:'remove',size: 'mini',color:'red',onClick: this.removeImagePost}} /> \n                \n        //         </List.Item> ) )}\n                \n        //     <List.Item>\n        //       <Icon style={{cursor: 'pointer', boder: 'solid 2px '}} color='black' inverted name='add' size='big' onClick={this.openModal} />\n        //     </List.Item>\n        //   </List>\n          \n        // </Segment> : ''\n      \n        <Dimmer.Dimmable  > \n          <Dimmer inverted active={this.state.percentUploaded > 0 && this.state.percentUploaded <100}>\n            <Loader>Loading</Loader>\n           \n          </Dimmer>\n\n          <List horizontal>\n          \n              {imagePost.map((val,key) => (\n                  <List.Item key={key+uuid} style={{marginRight: '15px'}}> \n  \n                      <Image wrapped rounded size='small' key={val.downloadURL} src={val.downloadURL} label={{as: 'a' ,name: key, corner:'right', icon:'remove',size: 'tiny',color:'red',onClick: this.removeImagePost}} /> \n                  \n                  </List.Item> ) )}\n                  \n              {imagePost.length > 0 ? \n                <List.Item>\n              <Icon link color='black' inverted name='add' size='big' onClick={this.openModal} />\n            </List.Item>\n            : ''  \n          }\n            </List>\n            \n    \n     \n          \n        </Dimmer.Dimmable>\n      )\n      \n      deleteImageFromStorge = imagePath =>{\n          if(imagePath){\n            this.state.storeRef.child(imagePath).delete().then(() => console.log(\"deleted\")).catch(err=> console.log(err))\n          }\n          \n      }\n\n      removeImagePost = event =>{\n        event.preventDefault();\n        let removeIndex = event.target.name;\n        \n        this.deleteImageFromStorge(this.state.imagePost[removeIndex].imagePath)\n\n        const newImagePost = this.state.imagePost.filter((value,index,arr) =>{\n          return index != removeIndex\n        })\n        \n\n        this.setState({imagePost : newImagePost})\n        \n        \n      }\n      \n    \n\n    render(){\n        const {user,post,postFromDatabase} = this.state;\n       \n\n        return(\n      <React.Fragment>\n        <CreatePostModal user={user} modal={this.state.postModal} closeModal={this.closeModal} />\n        <FileModal fileModal={this.state.fileModal}\n                   uploadFile = {this.uploadFile}\n                   closeModal = {this.closeModal}\n        />\n        \n    <Segment stacked>\n    \n        <Header as='h3' block>\n        \n          <Header.Content style={{opacity: 0.6}}>Tạo Bài Viết <Icon name='edit outline' /></Header.Content>\n        \n        </Header>\n        \n          {this.displayImagePost(this.state)}\n        \n\n    \n\n        <Form style={{marginTop: '5px'}}>\n         <Form.Group >\n           <Image size='tiny' avatar src={user.photoURL}/>\n          \n          \n            <Form.Field style={{width: '100%'}}>\n            <Input transparent  placeholder=\"Bạn đang nghĩ gì ?\" style={{height: '70px',fontSize: 16}} value={post} onClick={this.openPostModal} onChange={this.openPostModal} />\n            </Form.Field>\n\n         \n\n          \n         </Form.Group>\n        \n        </Form>\n\n      <Button.Group  compact fluid widths={4}  >\n        \n      <Button inverted style={{background: '#6FBE42'}}  onClick={this.openModal}  >\n              <Icon name='photo' /> Ảnh/Video\n            </Button>\n            <Button inverted style={{background: '#6FBE42'}}>\n              <Icon name='user plus' /> Tag Friends\n            </Button>\n         \n         \n            <Button inverted style={{background: '#6FBE42'}}>\n              <Icon name='smile outline' /> Cảm Xúc\n            </Button>\n          \n            <Button inverted style={{background: '#6FBE42'}}>\n              <Icon name='list' /> Khác\n             </Button>\n      </Button.Group>\n     \n  \n      {this.state.post.length > 0 || this.state.imagePost.length >0 ? <Button onClick={this.savePost} fluid style={{marginTop: '20px',background:'#ecf7e7'}}>\n        Post\n      </Button> : ''}\n        \n    </Segment>\n        \n      \n    \n      {postFromDatabase.length > 0 ? (\n        postFromDatabase.map((val, key) =>(\n          \n          <Segment  >\n      \n          <Feed size='large'>\n              <Feed.Event>\n              <Feed.Label image ={val.avatar} />\n              <Feed.Content>\n                <Feed.Summary> \n                <Dropdown\n                  inline\n                  closeOnChange\n                  options={this.state.postDrowdownOptions}\n                  pointing='top right'\n                  icon={null}\n                  style={{float: 'right', zIndex: 1000}}\n                  trigger={<Icon name='angle down' style={{opacity: 0.5 }} />}\n                />\n                <Feed.User content={val.createByName} />\n                <Feed.Date>\n\n                {moment(val.timestamp).locale('vi').fromNow()}\n                {/* {moment(val.timestamp).fromNow()} */}\n               \n                  \n                </Feed.Date>\n                \n                </Feed.Summary>\n                <Feed.Summary>\n                  <i style={{opacity: 0.5, fontSize: 14}} className=\"fas fa-globe-asia\"></i> \n               \n                </Feed.Summary>\n\n                \n                 \n           \n              </Feed.Content>\n              \n              </Feed.Event>\n            \n          </Feed>\n          \n          <Feed size='large'  >\n          \n          <Feed.Event>\n            <Feed.Content >\n              <Container fluid text textAlign='justified' content={val.postText}>\n\n              </Container>\n              {val.postImages ? (\n                val.postImages.map((value,key) =>(        \n                    <List key={val.createByUid+val.timestamp+uuid()+hash(value.downloadURL)} horizontal  >\n                      <List.Item key={'list'+val.createByUid+val.timestamp+uuid()+hash(value.downloadURL)}   as='a'  >\n                       \n                       \n                          <Image centered fluid key={'image'+val.createByUid+val.timestamp+uuid()+hash(value.downloadURL)} src={value.downloadURL} name={value.downloadURL} onClick={this.openImageModal} />\n                          {/* <img style={{padding: '10px 10px'}} src={value.downloadURL} name={value.downloadURL} onClick={this.openImageModal} />\n                     */}\n                        <ImageModal \n                         \n                          imageModal={this.state.imageModalStatus} \n                          closeModal={this.closeImageModal}\n                          imageURL={this.state.imageModalURL} />\n                      </List.Item>\n                    </List>\n                    \n                \n                ))\n              ) : ''}\n               \n             \n            </Feed.Content>\n            \n          </Feed.Event>\n       \n\n          <Container style={{marginTop:'15px'}} fluid> \n          <Icon \n            name={val.liked.length -1 !==0 ? 'thumbs up': ''} \n            color='blue'  size='small' /> \n            <span style={{opacity: 0.6}}>{val.liked.length -1 === 0 ? '': val.liked.length -1 +' Thích' }</span>\n            <span style={{float: 'right',opacity: 0.6}} >20 comnents</span>\n          </Container>\n         \n          <Divider />\n            <Button.Group fluid size='small' compact >\n            <Button  name={val.postChild} onClick={this.handleLikeClicked} basic compact >\n            \n                <Icon name='thumbs up'  color={val.liked.some(val=>{return val.userUID === user.uid}) ? 'blue' :''} /> Like\n              </Button>\n              <Button basic compact >\n                <Icon name='comment outline' /> Comment\n              </Button>\n              <Button  basic compact>\n                <Icon name='share' /> Share \n              </Button>\n            </Button.Group>\n            <Divider />\n      \n         \n        \n      </Feed>\n      </Segment>\n        ))\n      ) :  ''}\n\n     \n\n \n\n      \n  </React.Fragment>\n \n           \n            \n        )\n    }\n\n}\n\nexport default NewsFeeds"]},"metadata":{},"sourceType":"module"}