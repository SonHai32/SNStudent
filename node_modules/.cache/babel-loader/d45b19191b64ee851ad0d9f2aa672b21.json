{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst truncateArgs = require(\"../logging/truncateArgs\");\n\nconst util = require(\"util\");\n\nconst tty = process.stderr.isTTY && process.env.TERM !== \"dumb\";\nlet currentStatusMessage = undefined;\nlet hasStatusMessage = false;\nlet currentIndent = \"\";\nlet currentCollapsed = 0;\n\nconst indent = (str, prefix, colorPrefix, colorSuffix) => {\n  if (str === \"\") return str;\n  prefix = currentIndent + prefix;\n\n  if (tty) {\n    return prefix + colorPrefix + str.replace(/\\n/g, colorSuffix + \"\\n\" + prefix + colorPrefix) + colorSuffix;\n  } else {\n    return prefix + str.replace(/\\n/g, \"\\n\" + prefix);\n  }\n};\n\nconst clearStatusMessage = () => {\n  if (hasStatusMessage) {\n    process.stderr.write(\"\\x1b[2K\\r\");\n    hasStatusMessage = false;\n  }\n};\n\nconst writeStatusMessage = () => {\n  if (!currentStatusMessage) return;\n  const l = process.stderr.columns;\n  const args = l ? truncateArgs(currentStatusMessage, l - 1) : currentStatusMessage;\n  const str = args.join(\" \");\n  const coloredStr = \"\\x1B[1m\".concat(str, \"\\x1B[39m\\x1B[22m\");\n  process.stderr.write(\"\\x1B[2K\\r\".concat(coloredStr));\n  hasStatusMessage = true;\n};\n\nconst writeColored = (prefix, colorPrefix, colorSuffix) => {\n  return (...args) => {\n    if (currentCollapsed > 0) return;\n    clearStatusMessage(); // @ts-ignore\n\n    const str = indent(util.format(...args), prefix, colorPrefix, colorSuffix);\n    process.stderr.write(str + \"\\n\");\n    writeStatusMessage();\n  };\n};\n\nconst writeGroupMessage = writeColored(\"<-> \", \"\\u001b[1m\\u001b[36m\", \"\\u001b[39m\\u001b[22m\");\nconst writeGroupCollapsedMessage = writeColored(\"<+> \", \"\\u001b[1m\\u001b[36m\", \"\\u001b[39m\\u001b[22m\");\nmodule.exports = {\n  log: writeColored(\"    \", \"\\u001b[1m\", \"\\u001b[22m\"),\n  debug: writeColored(\"    \", \"\", \"\"),\n  trace: writeColored(\"    \", \"\", \"\"),\n  info: writeColored(\"<i> \", \"\\u001b[1m\\u001b[32m\", \"\\u001b[39m\\u001b[22m\"),\n  warn: writeColored(\"<w> \", \"\\u001b[1m\\u001b[33m\", \"\\u001b[39m\\u001b[22m\"),\n  error: writeColored(\"<e> \", \"\\u001b[1m\\u001b[31m\", \"\\u001b[39m\\u001b[22m\"),\n  logTime: writeColored(\"<t> \", \"\\u001b[1m\\u001b[35m\", \"\\u001b[39m\\u001b[22m\"),\n  group: (...args) => {\n    writeGroupMessage(...args);\n\n    if (currentCollapsed > 0) {\n      currentCollapsed++;\n    } else {\n      currentIndent += \"  \";\n    }\n  },\n  groupCollapsed: (...args) => {\n    writeGroupCollapsedMessage(...args);\n    currentCollapsed++;\n  },\n  groupEnd: () => {\n    if (currentCollapsed > 0) currentCollapsed--;else if (currentIndent.length >= 2) currentIndent = currentIndent.slice(0, currentIndent.length - 2);\n  },\n  // eslint-disable-next-line node/no-unsupported-features/node-builtins\n  profile: console.profile && (name => console.profile(name)),\n  // eslint-disable-next-line node/no-unsupported-features/node-builtins\n  profileEnd: console.profileEnd && (name => console.profileEnd(name)),\n  clear: tty && // eslint-disable-next-line node/no-unsupported-features/node-builtins\n  console.clear && (() => {\n    clearStatusMessage(); // eslint-disable-next-line node/no-unsupported-features/node-builtins\n\n    console.clear();\n    writeStatusMessage();\n  }),\n  status: tty ? (name, ...args) => {\n    args = args.filter(Boolean);\n\n    if (name === undefined && args.length === 0) {\n      clearStatusMessage();\n      currentStatusMessage = undefined;\n    } else if (typeof name === \"string\" && name.startsWith(\"[webpack.Progress] \")) {\n      currentStatusMessage = [name.slice(19), ...args];\n      writeStatusMessage();\n    } else if (name === \"[webpack.Progress]\") {\n      currentStatusMessage = [...args];\n      writeStatusMessage();\n    } else {\n      currentStatusMessage = [name, ...args];\n      writeStatusMessage();\n    }\n  } : writeColored(\"<s> \", \"\", \"\")\n};","map":null,"metadata":{},"sourceType":"script"}