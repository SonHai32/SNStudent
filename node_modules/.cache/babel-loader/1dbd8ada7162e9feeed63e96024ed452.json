{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst DllEntryDependency = require(\"./dependencies/DllEntryDependency\");\n\nconst SingleEntryDependency = require(\"./dependencies/SingleEntryDependency\");\n\nconst DllModuleFactory = require(\"./DllModuleFactory\");\n\nclass DllEntryPlugin {\n  constructor(context, entries, name) {\n    this.context = context;\n    this.entries = entries;\n    this.name = name;\n  }\n\n  apply(compiler) {\n    compiler.hooks.compilation.tap(\"DllEntryPlugin\", (compilation, {\n      normalModuleFactory\n    }) => {\n      const dllModuleFactory = new DllModuleFactory();\n      compilation.dependencyFactories.set(DllEntryDependency, dllModuleFactory);\n      compilation.dependencyFactories.set(SingleEntryDependency, normalModuleFactory);\n    });\n    compiler.hooks.make.tapAsync(\"DllEntryPlugin\", (compilation, callback) => {\n      compilation.addEntry(this.context, new DllEntryDependency(this.entries.map((e, idx) => {\n        const dep = new SingleEntryDependency(e);\n        dep.loc = {\n          name: this.name,\n          index: idx\n        };\n        return dep;\n      }), this.name), this.name, callback);\n    });\n  }\n\n}\n\nmodule.exports = DllEntryPlugin;","map":null,"metadata":{},"sourceType":"script"}