{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\"use strict\";\n\nconst _require = require(\"webpack-sources\"),\n      OriginalSource = _require.OriginalSource,\n      RawSource = _require.RawSource;\n\nconst Module = require(\"./Module\");\n\nconst WebpackMissingModule = require(\"./dependencies/WebpackMissingModule\");\n\nconst Template = require(\"./Template\");\n/** @typedef {import(\"./util/createHash\").Hash} Hash */\n\n\nclass ExternalModule extends Module {\n  constructor(request, type, userRequest) {\n    super(\"javascript/dynamic\", null); // Info from Factory\n\n    this.request = request;\n    this.externalType = type;\n    this.userRequest = userRequest;\n    this.external = true;\n  }\n\n  libIdent() {\n    return this.userRequest;\n  }\n\n  chunkCondition(chunk) {\n    return chunk.hasEntryModule();\n  }\n\n  identifier() {\n    return \"external \" + JSON.stringify(this.request);\n  }\n\n  readableIdentifier() {\n    return \"external \" + JSON.stringify(this.request);\n  }\n\n  needRebuild() {\n    return false;\n  }\n\n  build(options, compilation, resolver, fs, callback) {\n    this.built = true;\n    this.buildMeta = {};\n    this.buildInfo = {};\n    callback();\n  }\n\n  getSourceForGlobalVariableExternal(variableName, type) {\n    if (!Array.isArray(variableName)) {\n      // make it an array as the look up works the same basically\n      variableName = [variableName];\n    } // needed for e.g. window[\"some\"][\"thing\"]\n\n\n    const objectLookup = variableName.map(r => \"[\".concat(JSON.stringify(r), \"]\")).join(\"\");\n    return \"(function() { module.exports = \".concat(type).concat(objectLookup, \"; }());\");\n  }\n\n  getSourceForCommonJsExternal(moduleAndSpecifiers) {\n    if (!Array.isArray(moduleAndSpecifiers)) {\n      return \"module.exports = require(\".concat(JSON.stringify(moduleAndSpecifiers), \");\");\n    }\n\n    const moduleName = moduleAndSpecifiers[0];\n    const objectLookup = moduleAndSpecifiers.slice(1).map(r => \"[\".concat(JSON.stringify(r), \"]\")).join(\"\");\n    return \"module.exports = require(\".concat(JSON.stringify(moduleName), \")\").concat(objectLookup, \";\");\n  }\n\n  checkExternalVariable(variableToCheck, request) {\n    return \"if(typeof \".concat(variableToCheck, \" === 'undefined') {\").concat(WebpackMissingModule.moduleCode(request), \"}\\n\");\n  }\n\n  getSourceForAmdOrUmdExternal(id, optional, request) {\n    const externalVariable = \"__WEBPACK_EXTERNAL_MODULE_\".concat(Template.toIdentifier(\"\".concat(id)), \"__\");\n    const missingModuleError = optional ? this.checkExternalVariable(externalVariable, request) : \"\";\n    return \"\".concat(missingModuleError, \"module.exports = \").concat(externalVariable, \";\");\n  }\n\n  getSourceForDefaultCase(optional, request) {\n    if (!Array.isArray(request)) {\n      // make it an array as the look up works the same basically\n      request = [request];\n    }\n\n    const variableName = request[0];\n    const missingModuleError = optional ? this.checkExternalVariable(variableName, request.join(\".\")) : \"\";\n    const objectLookup = request.slice(1).map(r => \"[\".concat(JSON.stringify(r), \"]\")).join(\"\");\n    return \"\".concat(missingModuleError, \"module.exports = \").concat(variableName).concat(objectLookup, \";\");\n  }\n\n  getSourceString(runtime) {\n    const request = typeof this.request === \"object\" && !Array.isArray(this.request) ? this.request[this.externalType] : this.request;\n\n    switch (this.externalType) {\n      case \"this\":\n      case \"window\":\n      case \"self\":\n        return this.getSourceForGlobalVariableExternal(request, this.externalType);\n\n      case \"global\":\n        return this.getSourceForGlobalVariableExternal(request, runtime.outputOptions.globalObject);\n\n      case \"commonjs\":\n      case \"commonjs2\":\n        return this.getSourceForCommonJsExternal(request);\n\n      case \"amd\":\n      case \"amd-require\":\n      case \"umd\":\n      case \"umd2\":\n      case \"system\":\n        return this.getSourceForAmdOrUmdExternal(this.id, this.optional, request);\n\n      default:\n        return this.getSourceForDefaultCase(this.optional, request);\n    }\n  }\n\n  getSource(sourceString) {\n    if (this.useSourceMap) {\n      return new OriginalSource(sourceString, this.identifier());\n    }\n\n    return new RawSource(sourceString);\n  }\n\n  source(dependencyTemplates, runtime) {\n    return this.getSource(this.getSourceString(runtime));\n  }\n\n  size() {\n    return 42;\n  }\n  /**\n   * @param {Hash} hash the hash used to track dependencies\n   * @returns {void}\n   */\n\n\n  updateHash(hash) {\n    hash.update(this.externalType);\n    hash.update(JSON.stringify(this.request));\n    hash.update(JSON.stringify(Boolean(this.optional)));\n    super.updateHash(hash);\n  }\n\n}\n\nmodule.exports = ExternalModule;","map":null,"metadata":{},"sourceType":"script"}