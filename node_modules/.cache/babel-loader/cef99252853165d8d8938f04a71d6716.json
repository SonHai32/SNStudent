{"ast":null,"code":"const ImageResizer = (imageUrl, size) => {\n  let tempImg = new Image();\n  tempImg.src = imageUrl;\n\n  let createCanvas = (img, width, height) => {\n    let canvas = document.createElement('canvas');\n    let canvasCtx = canvas.getContext('2d');\n    canvas.width = width;\n    canvas.height = height;\n    canvasCtx.drawImage(img, 0, 0, canvas.width, canvas.height);\n    return canvas.toDataURL();\n  };\n\n  tempImg.onload = () => {\n    let tempW = tempImg.width;\n    let tempH = tempImg.height;\n    let min = tempW >= tempH ? tempH : tempW;\n    size = size || min;\n\n    if (tempH <= size && tempW <= size) {\n      createCanvas(imageUrl, tempW, tempH);\n    }\n\n    let startX = 0;\n\n    if (min !== tempW) {\n      startX = Math.round(tempW / 2 - min / 2);\n    }\n\n    let startY = 0;\n\n    if (min !== tempH) {\n      startY = Math.round(tempH / 2 - min / 2);\n    }\n\n    let finalImage = new Image();\n    finalImage.src = getImagePortion(tempImg, min, min, startX, startY, 1);\n\n    function callback(result) {\n      console.log(result);\n    }\n\n    finalImage.onload = () => {\n      // let result = createCanvas(finalImage, size, size)\n      // return result\n      callback(createCanvas(finalImage, size, size));\n    };\n\n    console.log(imageSrc);\n  };\n};\n\nconst getImagePortion = (imgObj, newWidth, newHeight, startX, startY, ratio) => {\n  let canvas = document.createElement('canvas');\n  let ctx = canvas.getContext('2d');\n  canvas.width = newWidth;\n  canvas.height = newHeight;\n  let bufferedCanvas = document.createElement('canvas');\n  let bufferedCtx = bufferedCanvas.getContext('2d');\n  bufferedCanvas.width = imgObj.width;\n  bufferedCanvas.height = imgObj.height;\n  bufferedCtx.drawImage(imgObj, 0, 0);\n  ctx.drawImage(bufferedCanvas, 0, 0, newWidth * ratio, newHeight * ratio, 0, 0, newWidth, newHeight);\n  return canvas.toDataURL();\n};\n\nexport default ImageResizer;","map":{"version":3,"sources":["/home/hari/Desktop/web-dev/React/SNStudent/src/components/test.js"],"names":["ImageResizer","imageUrl","size","tempImg","Image","src","createCanvas","img","width","height","canvas","document","createElement","canvasCtx","getContext","drawImage","toDataURL","onload","tempW","tempH","min","startX","Math","round","startY","finalImage","getImagePortion","callback","result","console","log","imageSrc","imgObj","newWidth","newHeight","ratio","ctx","bufferedCanvas","bufferedCtx"],"mappings":"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","sourcesContent":["const ImageResizer = (imageUrl, size) => {\n    let tempImg = new Image();\n    tempImg.src = imageUrl;\n\n\n    let createCanvas = (img, width, height) => {\n        let canvas = document.createElement('canvas');\n        let canvasCtx = canvas.getContext('2d');\n        canvas.width = width;\n        canvas.height = height\n        canvasCtx.drawImage(img, 0, 0, canvas.width, canvas.height)\n        return canvas.toDataURL()\n    }\n\n    tempImg.onload = () => {\n        let tempW = tempImg.width;\n        let tempH = tempImg.height;\n\n        let min = tempW >= tempH ? tempH : tempW;\n        size = size || min\n\n        if (tempH <= size && tempW <= size) {\n            createCanvas(imageUrl, tempW, tempH)\n        }\n\n        let startX = 0;\n        if (min !== tempW) {\n            startX = Math.round(tempW / 2 - (min / 2))\n        }\n\n        let startY = 0;\n        if (min !== tempH) {\n            startY = Math.round(tempH / 2 - (min / 2))\n        }\n\n        let finalImage = new Image();\n        finalImage.src = getImagePortion(tempImg, min, min, startX, startY, 1);\n\n        function callback(result) {\n            console.log(result)\n        }\n\n\n        finalImage.onload = () => {\n            // let result = createCanvas(finalImage, size, size)\n            // return result\n            callback(createCanvas(finalImage, size, size))\n        }\n        console.log(imageSrc)\n\n\n\n    }\n\n\n}\n\n\nconst getImagePortion = (imgObj, newWidth, newHeight, startX, startY, ratio) => {\n    let canvas = document.createElement('canvas');\n    let ctx = canvas.getContext('2d');\n    canvas.width = newWidth;\n    canvas.height = newHeight;\n\n    let bufferedCanvas = document.createElement('canvas');\n    let bufferedCtx = bufferedCanvas.getContext('2d');\n    bufferedCanvas.width = imgObj.width;\n    bufferedCanvas.height = imgObj.height;\n\n    bufferedCtx.drawImage(imgObj, 0, 0);\n\n    ctx.drawImage(bufferedCanvas, 0, 0, newWidth * ratio, newHeight * ratio, 0, 0, newWidth, newHeight)\n    return canvas.toDataURL();\n}\n\nexport default ImageResizer"]},"metadata":{},"sourceType":"module"}