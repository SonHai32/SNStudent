{"ast":null,"code":"const ImageResizer = (imageUrl, size, callback) => {\n  let tempImg = new Image();\n  tempImg.src = imageUrl;\n\n  let createCanvas = (img, width, height) => {\n    let canvas = document.createElement('canvas');\n    let canvasCtx = canvas.getContext('2d');\n    canvas.width = width;\n    canvas.height = height;\n    canvasCtx.drawImage(img, 0, 0, canvas.width, canvas.height);\n    return canvas.toDataURL();\n  };\n\n  tempImg.onload = () => {\n    let tempW = tempImg.width;\n    let tempH = tempImg.height;\n    let min = tempW >= tempH ? tempH : tempW;\n    size = size || min;\n\n    if (tempH <= size && tempW <= size) {\n      createCanvas(imageUrl, tempW, tempH);\n    }\n\n    let startX = 0;\n\n    if (min !== tempW) {\n      startX = Math.round(tempW / 2 - min / 2);\n    }\n\n    let startY = 0;\n\n    if (min !== tempH) {\n      startY = Math.round(tempH / 2 - min / 2);\n    }\n\n    let finalImage = new Image();\n    finalImage.src = getImagePortion(tempImg, min, min, startX, startY, 1);\n\n    finalImage.onload = () => {\n      callback(createCanvas(finalImage, size, size));\n    };\n  };\n};\n\nconst getImagePortion = (imgObj, newWidth, newHeight, startX, startY, ratio) => {\n  let canvas = document.createElement('canvas');\n  let ctx = canvas.getContext('2d');\n  canvas.width = newWidth;\n  canvas.height = newHeight;\n  let bufferedCanvas = document.createElement('canvas');\n  let bufferedCtx = bufferedCanvas.getContext('2d');\n  bufferedCanvas.width = imgObj.width;\n  bufferedCanvas.height = imgObj.height;\n  bufferedCtx.drawImage(imgObj, 0, 0);\n  ctx.drawImage(bufferedCanvas, 0, 0, newWidth * ratio, newHeight * ratio, 0, 0, newWidth, newHeight);\n  return canvas.toDataURL();\n};\n\nexport default ImageResizer;","map":{"version":3,"sources":["/home/hari/Desktop/web-dev/React/SNStudent/src/components/ImageResize.js"],"names":["ImageResizer","imageUrl","size","callback","tempImg","Image","src","createCanvas","img","width","height","canvas","document","createElement","canvasCtx","getContext","drawImage","toDataURL","onload","tempW","tempH","min","startX","Math","round","startY","finalImage","getImagePortion","imgObj","newWidth","newHeight","ratio","ctx","bufferedCanvas","bufferedCtx"],"mappings":"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","sourcesContent":["const ImageResizer = (imageUrl, size, callback) => {\n    let tempImg = new Image();\n    tempImg.src = imageUrl;\n\n    let createCanvas = (img, width, height) => {\n        let canvas = document.createElement('canvas');\n        let canvasCtx = canvas.getContext('2d');\n        canvas.width = width;\n        canvas.height = height\n        canvasCtx.drawImage(img, 0, 0, canvas.width, canvas.height)\n        return canvas.toDataURL()\n    }\n\n    tempImg.onload = () => {\n        let tempW = tempImg.width;\n        let tempH = tempImg.height;\n\n        let min = tempW >= tempH ? tempH : tempW;\n        size = size || min\n\n        if (tempH <= size && tempW <= size) {\n            createCanvas(imageUrl, tempW, tempH)\n        }\n\n        let startX = 0;\n        if (min !== tempW) {\n            startX = Math.round(tempW / 2 - (min / 2))\n        }\n\n        let startY = 0;\n        if (min !== tempH) {\n            startY = Math.round(tempH / 2 - (min / 2))\n        }\n\n        let finalImage = new Image();\n        finalImage.src = getImagePortion(tempImg, min, min, startX, startY, 1);\n\n\n\n\n        finalImage.onload = () => {\n            callback(createCanvas(finalImage, size, size))\n        }\n    }\n\n}\n\n\nconst getImagePortion = (imgObj, newWidth, newHeight, startX, startY, ratio) => {\n    let canvas = document.createElement('canvas');\n    let ctx = canvas.getContext('2d');\n    canvas.width = newWidth;\n    canvas.height = newHeight;\n\n    let bufferedCanvas = document.createElement('canvas');\n    let bufferedCtx = bufferedCanvas.getContext('2d');\n    bufferedCanvas.width = imgObj.width;\n    bufferedCanvas.height = imgObj.height;\n\n    bufferedCtx.drawImage(imgObj, 0, 0);\n\n    ctx.drawImage(bufferedCanvas, 0, 0, newWidth * ratio, newHeight * ratio, 0, 0, newWidth, newHeight)\n    return canvas.toDataURL();\n}\n\nexport default ImageResizer"]},"metadata":{},"sourceType":"module"}